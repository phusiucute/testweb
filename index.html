<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Kho Tài Liệu - Free Share</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Quicksand:500,700&display=swap">
  <style>
    body { font-family: 'Quicksand', sans-serif; background: #f7f9fb; margin:0; color:#222;}
    /* --- HEADER NEW LAYOUT --- */
    header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      background: #fff;
      border-bottom: 1px solid #e3e3e3;
      padding: 14px 24px 10px 24px;
      position: relative;
    }
    .main-logo {
      height: 64px;
      width: 64px;
      border-radius: 17px;
      box-shadow: 0 4px 18px rgba(25, 118, 210, 0.12);
      object-fit: cover;
      background: #f8f8ff;
      border: 2.5px solid #1976d2;
      display: block;
    }
    .header-socials {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-right: 4px;
    }
    .header-social-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 38px; height: 38px;
      border-radius: 50%;
      background: #f8f8ff;
      border: 2px solid #e3e3e3;
      transition: box-shadow 0.18s, background 0.14s;
      box-shadow: 0 2px 10px rgba(25,118,210,0.04);
      cursor: pointer;
      position: relative;
    }
    .header-social-btn:hover { background: #e3f2fd;}
    .header-social-btn img, .header-social-btn svg {
      width: 23px;
      height: 23px;
      display: block;
    }
    .header-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-width: 0;
    }
    .title {
      font-size: 2.15rem;
      font-weight: 800;
      letter-spacing: 1px;
      text-align: center;
      color: #1976d2;
      display: flex;
      align-items: center;
      gap: 10px;
      text-shadow: 0 3px 18px rgba(25,118,210,0.08);
      margin-bottom: 2px;
      margin-top: 3px;
    }
    .contact-info {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 7px;
    }
    .contact-chip {
      display: inline-flex;
      align-items: center;
      background: #e3f2fd;
      color: #1976d2;
      border-radius: 20px;
      padding: 5px 14px;
      font-weight: 600;
      text-decoration: none;
      font-size: 1.04rem;
      transition: background 0.2s, color 0.2s;
      border: 1.5px solid #bbdefb;
    }
    .contact-chip:hover {
      background: #1976d2;
      color: #fff;
    }
    .icon-svg {
      height: 22px;
      width: 22px;
      margin-right: 5px;
      vertical-align: middle;
      display: inline-block;
    }
    /* --- Sale countdown in promo --- */
    .sale-countdown-box {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: linear-gradient(90deg,#e53935 75%,#ffb3b3 100%);
      border-radius: 13px;
      padding: 6px 22px 6px 14px;
      color: #fff;
      font-size: 1.08rem;
      font-weight: 800;
      margin-bottom: 11px;
      margin-top: 4px;
      box-shadow:0 2px 12px rgba(229,57,53,0.06);
      border:2.5px solid #d32f2f;
      letter-spacing: 1px;
      position: relative;
    }
    .sale-countdown-label {
      font-weight: bold;
      font-size: 1.1rem;
      margin-right: 8px;
      letter-spacing: 1.5px;
      color: #fff;
    }
    .sale-countdown-num {
      background: #fff;
      color: #e53935;
      padding: 3px 10px;
      border-radius: 8px;
      font-size: 1.12rem;
      font-weight: 900;
      margin-right: 2px;
      min-width: 30px;
      display: inline-block;
      text-align: center;
      box-shadow: 0 2px 10px rgba(229,57,53,0.09);
    }
    .sale-countdown-unit {
      font-size: 0.97rem;
      font-weight: 700;
      color: #fffde7;
      margin-right: 5px;
      margin-left: 1px;
    }
    /* --- Zalo chat button --- */
    .zalo-fab {
      position: fixed;
      bottom: 26px;
      right: 24px;
      z-index: 100;
      width: 58px;
      height: 58px;
      background: #008EE6;
      border-radius: 50%;
      box-shadow: 0 5px 24px rgba(0, 142, 230, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: 4px solid #fff;
      transition: box-shadow 0.19s;
    }
    .zalo-fab:hover {box-shadow:0 9px 26px rgba(25,118,210,0.18);}
    .zalo-fab img, .zalo-fab svg {
      width: 36px;
      height: 36px;
      display: block;
    }
    .zalo-chat-balloon {
      display: none;
      position: fixed;
      bottom: 88px;
      right: 28px;
      z-index: 110;
      background: #fff;
      color: #1976d2;
      font-weight: 700;
      font-size: 1.09rem;
      padding: 13px 20px;
      border-radius: 15px;
      box-shadow: 0 4px 22px rgba(25,118,210,0.13);
      border: 2px solid #e3f2fd;
      min-width: 175px;
      max-width: 90vw;
      animation: chatBalloonShow 0.35s;
    }
    @keyframes chatBalloonShow {
      0% {transform:translateY(20px); opacity:0}
      100% {transform:translateY(0); opacity:1}
    }
    .zalo-chat-balloon span {
      color: #fff;
      background: #008ee6;
      padding: 2px 8px 2px 8px;
      border-radius: 8px;
      font-weight: 800;
      margin: 0 2px;
      font-size: 1.09rem;
      letter-spacing:0.5px;
      box-shadow:0 2px 12px rgba(0,142,230,0.07);
    }
    /* --- Responsive --- */
    @media (max-width:900px) {
      .doc-list { grid-template-columns:repeat(2,1fr);}
      header {padding: 10px 7px;}
      .main-logo {width: 54px; height: 54px;}
      .title {font-size:1.27rem;}
      .header-social-btn {width: 31px;height: 31px;}
      .header-social-btn img, .header-social-btn svg {width:19px;height:19px;}
    }
    @media (max-width:600px) {
      .container { padding:12px 4px;}
      .doc-list { grid-template-columns:1fr;}
      .tabs, .subjects { flex-wrap:wrap; gap:6px;}
      .main-logo {height:40px;width:40px;}
      .header-main {margin-left: 6px;}
      .zalo-fab {width:45px;height:45px;bottom:14px;right:12px;}
      .zalo-fab img,.zalo-fab svg {width:26px;height:26px;}
      .zalo-chat-balloon {font-size:1.03rem;padding:9px 13px;}
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo" class="main-logo" onerror="this.style.display='none'">
    <div class="header-main">
      <div class="title">
        <span>Kho Tài Liệu Miễn Phí</span>
      </div>
      <div class="contact-info">
        <a href="https://zalo.me/0788559492" target="_blank" class="contact-chip" title="Zalo">
          <span class="icon-svg" style="background:#fff;border-radius:50%;margin-right:5px;">
            <svg width="22" height="22" viewBox="0 0 48 48" fill="none">
              <circle cx="24" cy="24" r="24" fill="#008EE6"/>
              <path d="M34.5,32.5c-2.5,0-3.313-2.625-3.5-4.75c-0.188-2.125-1.75-3.75-4-3.75s-3.813,1.625-4,3.75 c-0.188,2.125-1,4.75-3.5,4.75c-2.5,0-4-2.438-4-5.5c0-7.438,7.5-12,11.5-12S38.5,19.563,38.5,27 C38.5,30.063,37,32.5,34.5,32.5z" fill="#fff"/>
            </svg>
          </span>
          0788.559.9492
        </a>
      </div>
    </div>
    <div class="header-socials">
      <a href="https://www.tiktok.com/@khoahocgiasiure" target="_blank" class="header-social-btn" title="TikTok">
        <svg viewBox="0 0 24 24" fill="currentColor" width="23" height="23" xmlns="http://www.w3.org/2000/svg">
          <g>
            <path d="M12.66 2h3.11c.13 1.73 1.44 3.08 3.18 3.23V8.4c-.8.07-1.62-.01-2.41-.24v6.56c0 3.6-2.44 6.24-6.02 6.24-3.19 0-5.77-2.59-5.77-5.78 0-3.2 2.58-5.78 5.77-5.78.12 0 .24.01.36.02V13.3c-.12-.03-.24-.05-.36-.05-1.15 0-2.08.94-2.08 2.1 0 1.13.93 2.06 2.08 2.06 1.3 0 2.13-.83 2.13-2.14V2z" fill="#000"/>
          </g>
        </svg>
      </a>
      <a href="https://www.threads.net/@khoahocgiasiure" target="_blank" class="header-social-btn" title="Threads">
        <svg viewBox="0 0 32 32" width="23" height="23" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <g>
            <path d="M16 2.9c-7.2 0-13 5.8-13 13s5.8 13 13 13 13-5.8 13-13-5.8-13-13-13zm0 24c-6.1 0-11-4.9-11-11s4.9-11 11-11 11 4.9 11 11-4.9 11-11 11zm0-18c-3.9 0-7 3.1-7 7 0 3.8 3.1 7 7 7 2.4 0 4.7-1.2 6-3.2-.4-.3-.7-.7-1.2-.7-1.2 0-1.7 1.1-2.5 2.2-.7.9-1.4 1.2-2.2 1.2-1.7 0-2.9-1.2-2.9-2.9 0-.9.5-1.8 1.3-2.3.2-.1.3-.3.3-.5 0-.1 0-.2-.1-.3-.3-.5-.3-1.1.1-1.5.3-.3.7-.4 1.1-.3.3.1.6.1.9.1.5 0 .8-.2 1-.3.3-.3.8-.3 1.1-.1.2.2.3.5.2.8-.3 1.1-.3 2.2.2 3.1.2.3.5.5.8.5.1 0 .3-.1.4-.2.7-.6 1.1-1.4 1.1-2.3 0-2.2-1.8-4-4-4zm0 2c1.1 0 2 .9 2 2 0 1.1-.9 2-2 2s-2-.9-2-2c0-1.1.9-2 2-2z" fill="#000"/>
          </g>
        </svg>
      </a>
    </div>
  </header>
<!-- Đếm ngược kỳ thi -->
<div class="exam-countdown-container">
  <div style="font-size:1.2rem;font-weight:700;color:#1565c0;margin-bottom:10px;">Đếm ngược kỳ thi</div>
  <div class="exam-countdown-box">
    <div class="exam-countdown-labels">
      <div style="font-size:1.18rem;font-weight:bold;line-height:1.3">THPT<br>QG</div>
    </div>
    <div class="exam-countdown-number"><span id="countdown-day">00</span><span class="exam-countdown-unit">Ngày</span></div>
    <div class="exam-countdown-number"><span id="countdown-hour">00</span><span class="exam-countdown-unit">Giờ</span></div>
    <div class="exam-countdown-number"><span id="countdown-minute">00</span><span class="exam-countdown-unit">Phút</span></div>
    <div class="exam-countdown-number"><span id="countdown-second">00</span><span class="exam-countdown-unit">Giây</span></div>
  </div>
</div>

<div class="zalo-fab" id="zaloFab" title="Nhắn Zalo để được tư vấn ngay!">
  <svg viewBox="0 0 48 48" fill="none">
    <circle cx="24" cy="24" r="24" fill="#008EE6"/>
    <path d="M34.5,32.5c-2.5,0-3.313-2.625-3.5-4.75c-0.188-2.125-1.75-3.75-4-3.75s-3.813,1.625-4,3.75
      c-0.188,2.125-1,4.75-3.5,4.75c-2.5,0-4-2.438-4-5.5c0-7.438,7.5-12,11.5-12S38.5,19.563,38.5,27
      C38.5,30.063,37,32.5,34.5,32.5z" fill="#fff"/>
    <path d="M30 19a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill="#008EE6"/>
  </svg>
</div>
<div class="zalo-chat-balloon" id="zaloBalloon">
  💬 <span>Liên hệ Zalo</span> để được tư vấn ngay!
</div>

<div class="container">
  <!-- Sale countdown box -->
  <div class="sale-countdown-box" style="float:right; margin-top:0;margin-bottom:18px;">
    <span class="sale-countdown-label">SALE GIÁ SỐC</span>
    <span id="sale-day" class="sale-countdown-num">00</span><span class="sale-countdown-unit">ngày</span>
    <span id="sale-hour" class="sale-countdown-num">00</span><span class="sale-countdown-unit">giờ</span>
    <span id="sale-min" class="sale-countdown-num">00</span><span class="sale-countdown-unit">phút</span>
    <span id="sale-sec" class="sale-countdown-num">00</span><span class="sale-countdown-unit">giây</span>
  </div>
  <div class="promo" style="clear:both;">
    <strong>🎓 KHÓA HỌC XPS – LỚP 10, 11, 12 – CẤP TỐC, GIÁ RẺ</strong><br>
    💥 Ưu đãi tháng này – Học trọn gói từ A–Z, chọn thầy cô theo gu của bạn!<br>
    📘 <u>Combo Lớp 12 – dành cho 2K7</u>:<br>
    &nbsp;&nbsp;&nbsp;✅ Giá: <b style="color:#e53935;font-size:1.13em;background:rgba(255,235,238,0.94);padding:2px 8px;border-radius:8px;box-shadow:0 1px 5px #ffeaea;">ib zalo</b> nhé<br>
    &nbsp;&nbsp;&nbsp;📌 TẶNG kèm: Khóa học lớp 10 + 11 bản 2025<br>
    📘 <u>Combo Lớp 12 – dành cho 2K8</u>:<br>
    &nbsp;&nbsp;&nbsp;✅ Giá: <b style="color:#e53935;font-size:1.13em;background:rgba(255,235,238,0.94);padding:2px 8px;border-radius:8px;box-shadow:0 1px 5px #ffeaea;">ib zalo</b> nhé<br>
    &nbsp;&nbsp;&nbsp;📌 TẶNG kèm: Khóa học lớp 10 + 11 bản 2025<br>
    📗 <u>Combo Lớp 11/10 – dành cho 2K9/2K10</u>:<br>
    &nbsp;&nbsp;&nbsp;✅ Giá: <b style="color:#e53935;font-size:1.13em;background:rgba(255,235,238,0.94);padding:2px 8px;border-radius:8px;box-shadow:0 1px 5px #ffeaea;">ib zalo</b> nhé<br>
    &nbsp;&nbsp;&nbsp;📌 Có cả tổ hợp: Toán, Văn, Anh, KHTN, KHXH<br>
    &nbsp;&nbsp;&nbsp;📌 TẶNG: Khóa học lớp 10 bản 2025<br>
    🆓 ĐƯỢC HỌC THỬ 24 GIỜ MIỄN PHÍ trước khi đăng ký<br>
    ♻️ Cập nhật bài giảng mới mỗi tuần, có file luyện đề, hệ thống ôn tập cuối kỳ<br>
    <b style="color:#1976d2;">🎯 Đặc biệt:</b><br>
    Khóa TOEIC cô Mai Phương: <b style="color:#e53935;font-size:1.13em;background:rgba(255,235,238,0.94);padding:2px 8px;border-radius:8px;box-shadow:0 1px 5px #ffeaea;">ib zalo</b> nhé<br>
    Khóa IELTS nền tảng – nâng band: <b style="color:#e53935;font-size:1.13em;background:rgba(255,235,238,0.94);padding:2px 8px;border-radius:8px;box-shadow:0 1px 5px #ffeaea;">ib zalo</b> nhé<br>
    Khóa sinh viên ôn lại gốc lớp 12: <b style="color:#e53935;font-size:1.13em;background:rgba(255,235,238,0.94);padding:2px 8px;border-radius:8px;box-shadow:0 1px 5px #ffeaea;">ib zalo</b> nhé<br>
    ⏳ Ưu đãi giới hạn trong tháng – nhanh tay đăng ký để không bỏ lỡ!
  </div>
  <div class="tabs" id="classTabs"></div>
  <div class="subjects" id="subjectTabs"></div>
  <div class="doc-list" id="documentList"></div>
</div>
<footer>
  <b>Liên hệ:</b> Zalo 0788559492 &bull; TikTok @khoahocgiasiure &bull; Threads @khoahocgiasiure<br>
  &copy; 2025 <b> by @phusiucute</b> - Share tài liệu khóa học 10, 11, 12 giá rẻ.
</footer>
<script>
  // Đếm ngược kỳ thi
  const examDate = new Date("2025-06-26T07:45:00+07:00"); // đổi lại nếu cần

  function updateExamCountdown() {
    const now = new Date();
    const diff = examDate - now;
    let days = 0, hours = 0, minutes = 0, seconds = 0;
    if (diff > 0) {
      days = Math.floor(diff / (1000 * 60 * 60 * 24));
      hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      minutes = Math.floor((diff / (1000 * 60)) % 60);
      seconds = Math.floor((diff / 1000) % 60);
    }
    document.getElementById("countdown-day").textContent = days.toString().padStart(2, "0");
    document.getElementById("countdown-hour").textContent = hours.toString().padStart(2, "0");
    document.getElementById("countdown-minute").textContent = minutes.toString().padStart(2, "0");
    document.getElementById("countdown-second").textContent = seconds.toString().padStart(2, "0");
  }
  setInterval(updateExamCountdown, 1000);
  updateExamCountdown();

  // Đếm ngược SALE (ví dụ hết ngày 16/6/2025 23:59)
  const saleEnd = new Date("2025-06-16T23:59:59+07:00");
  function updateSaleCountdown() {
    const now = new Date();
    let diff = saleEnd - now;
    let days = 0, hours = 0, minutes = 0, seconds = 0;
    if (diff > 0) {
      days = Math.floor(diff / (1000 * 60 * 60 * 24));
      hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      minutes = Math.floor((diff / (1000 * 60)) % 60);
      seconds = Math.floor((diff / 1000) % 60);
    }
    document.getElementById("sale-day").textContent = days.toString().padStart(2, "0");
    document.getElementById("sale-hour").textContent = hours.toString().padStart(2, "0");
    document.getElementById("sale-min").textContent = minutes.toString().padStart(2, "0");
    document.getElementById("sale-sec").textContent = seconds.toString().padStart(2, "0");
  }
  setInterval(updateSaleCountdown, 1000);
  updateSaleCountdown();

  // Zalo FAB chat
  const zaloFab = document.getElementById('zaloFab');
  const zaloBalloon = document.getElementById('zaloBalloon');
  let zaloBalloonTimer = null;
  zaloFab.onclick = function() {
    window.open('https://zalo.me/0788559492', '_blank');
  };
  zaloFab.addEventListener('mouseenter', ()=>{
    zaloBalloon.style.display = 'block';
    clearTimeout(zaloBalloonTimer);
    zaloBalloonTimer = setTimeout(()=>{zaloBalloon.style.display='none'}, 4000);
  });
  zaloFab.addEventListener('mouseleave', ()=> {
    zaloBalloon.style.display = 'none';
    clearTimeout(zaloBalloonTimer);
  });

  // Tự động hiện bóng chat 3s khi vào trang
  setTimeout(()=>{zaloBalloon.style.display='block'; zaloBalloonTimer = setTimeout(()=>{zaloBalloon.style.display='none'}, 4200);},1200);

  // === GOOGLE SHEET CODE GIỮ NGUYÊN ===
  const SHEET_API = "https://opensheet.elk.sh/1hXvKb09Bu5xzqFAlgRjZ1S3Z0uQ8wjfDVQQn4uAuYH0/Sheet1";
  const subjectList = ["toán","lý","hóa","sinh","sử","địa","văn","tiếng anh"];
  let allDocs = [];
  let classList = [];
  let currentClass = "";
  let currentSubject = subjectList[0];

  function renderClassTabs() {
    const classTabs = document.getElementById("classTabs");
    classTabs.innerHTML = "";
    classList.forEach(cls => {
      const tab = document.createElement("div");
      tab.className = "tab" + (cls===currentClass ? " active" : "");
      tab.innerText = "Lớp " + cls;
      tab.onclick = () => {
        currentClass = cls;
        let found = subjectList.find(subj => allDocs.some(doc => doc.class === cls && doc.subject === subj));
        currentSubject = found || subjectList[0];
        renderClassTabs(); renderSubjectTabs(); renderDocs();
      };
      classTabs.appendChild(tab);
    });
  }
  function renderSubjectTabs() {
    const subjectTabs = document.getElementById("subjectTabs");
    subjectTabs.innerHTML = "";
    subjectList.forEach(sub => {
      if (allDocs.some(doc => doc.class === currentClass && doc.subject === sub)) {
        const tab = document.createElement("div");
        tab.className = "subject" + (sub===currentSubject ? " active" : "");
        tab.innerText = sub.charAt(0).toUpperCase() + sub.slice(1);
        tab.onclick = () => { currentSubject = sub; renderSubjectTabs(); renderDocs(); };
        subjectTabs.appendChild(tab);
      }
    });
  }
  function renderDocs() {
    const docList = document.getElementById("documentList");
    docList.innerHTML = "";
    const docs = allDocs.filter(doc => doc.class === currentClass && doc.subject === currentSubject);
    if (!docs || docs.length === 0) {
      docList.innerHTML = "<div style='grid-column:1/-1;text-align:center;color:#999;font-size:1.1rem'>Chưa có tài liệu cho mục này.</div>";
      return;
    }
    docs.forEach((doc, idx) => {
      const div = document.createElement("div");
      div.className = "doc-box";
      const key = "clicked_" + (doc.title||"") + "_" + (doc.class||"") + "_" + (doc.subject||"");
      div.onclick = () => {
        const isFirst = !localStorage.getItem(key);
        if(isFirst && doc.shopee_link){
          localStorage.setItem(key, "true");
          window.open(doc.shopee_link, "_blank");
        } else if(doc.drive_link) {
          window.open(doc.drive_link, "_blank");
        }
      };
      div.innerHTML = `<span class="doc-icon">📄</span>
        <span class="doc-title">${doc.title||"(Không có tên tài liệu)"}</span>
        <div class="doc-date">Cập nhật: ${doc.updatedAt||""}</div>
      `;
      docList.appendChild(div);
    });
  }

  fetch(SHEET_API)
    .then(res => res.json())
    .then(rows => {
      allDocs = rows.map(doc => ({
        ...doc,
        class: (doc.class||"").trim(),
        subject: (doc.subject||"").trim().toLowerCase(),
        title: (doc.title||"").trim(),
        drive_link: (doc.drive_link||"").trim(),
        shopee_link: (doc.shopee_link||"").trim(),
        updatedAt: (doc.updatedAt||"").trim()
      })).filter(doc => doc.class && doc.subject && doc.title);
      classList = [...new Set(allDocs.map(doc=>doc.class))].sort((a,b) => b-a);
      currentClass = classList[0] || "";
      let found = subjectList.find(subj => allDocs.some(doc => doc.class === currentClass && doc.subject === subj));
      currentSubject = found || subjectList[0];
      renderClassTabs();
      renderSubjectTabs();
      renderDocs();
    })
    .catch(e => {
      document.getElementById("documentList").innerHTML = "<div style='color:red'>Không tải được dữ liệu từ Google Sheet. Hãy kiểm tra lại ID Sheet và quyền chia sẻ!</div>";
    });
</script>
</body>
</html>
