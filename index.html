<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Kho T√†i Li·ªáu - Free Share</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Quicksand:500,700&display=swap">
  <style>
    html, body {
      min-height: 100vh;
      margin: 0;
      padding: 0;
      background: #f7f9fb;
      color: #222;
      font-family: 'Quicksand', sans-serif;
      font-size: 16px;
      -webkit-tap-highlight-color: transparent;
    }
    /* HEADER FLEX */
    header {
      background: #fff;
      border-bottom: 1px solid #e3e3e3;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 76px;
      position: relative;
      padding: 0 32px 0 0;
      z-index: 3;
    }
    .header-left-group {
      display: flex;
      align-items: center;
      gap: 14px;
      min-width: 0;
    }
    .main-logo {
      height: 46px;
      width: 46px;
      border-radius: 13px;
      background: #f8f8ff;
      border: 2px solid #1976d2;
      object-fit: cover;
      box-shadow: 0 2px 12px rgba(25, 118, 210, 0.10);
    }
    .header-title {
      font-size: 1.22rem;
      font-weight: 800;
      letter-spacing: 1px;
      color: #1976d2;
      text-shadow: 0 1px 7px rgba(25,118,210,0.07);
      line-height: 1.1;
      margin-left: 0px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 200px;
      display: inline-block;
    }
    /* COUNTDOWN - ƒê·∫∏P NH∆Ø ·∫¢NH */
    .header-countdown-wrap {
      display: flex;
      align-items: center;
      gap: 0;
      margin-left: auto;
      min-width: 0;
      user-select: none;
    }
    .countdown-label-box {
      background: linear-gradient(90deg, #ffc107 90%, #ffd54f 100%);
      color: #fff;
      border-radius: 12px 0 0 12px;
      font-weight: 900;
      font-size: 1.02rem;
      padding: 13px 20px 13px 20px;
      text-align: center;
      min-width: 58px;
      height: 54px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 1px 8px #ffe082;
      border-right: 3px solid #fffde7;
      letter-spacing: 0.5px;
    }
    .countdown-main-box {
      display: flex;
      align-items: center;
      background: #fffde7;
      border-radius: 0 14px 14px 0;
      box-shadow: 0 2px 13px rgba(255,193,7,0.13);
      padding: 0 7px 0 0;
      height: 54px;
    }
    .countdown-block {
      background: #fff;
      color: #e65100;
      border-radius: 10px;
      padding: 7px 16px 4px 16px;
      min-width: 44px;
      margin: 0 9px 0 0;
      text-align: center;
      font-size: 1.18rem;
      font-weight: 700;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: inherit;
      box-shadow: 0 1px 6px #ffecb3;
      border: 2px solid #ffe082;
      transition: background 0.13s, color 0.13s;
    }
    .countdown-block:last-child {margin-right:0;}
    .countdown-unit {
      color: #b26a00;
      font-size: 0.97rem;
      font-weight: 700;
      margin-top: 2px;
      display: block;
      letter-spacing: .2px;
    }
    @media (max-width:900px) {
      .header-countdown-wrap {flex-shrink:1;}
      .countdown-label-box {padding:7px 8px; height:40px; font-size:0.92rem;}
      .countdown-main-box {height:40px;}
      .countdown-block{font-size:0.88rem;min-width:27px;padding:4px 7px 2px 7px;}
      .countdown-unit{font-size:0.74rem;}
      .main-logo{height:26px;width:26px;}
      .header-title{font-size:0.8rem;}
      header{height:54px;}
    }
    /* Popup qu·∫£ng c√°o gi·ªØ nguy√™n t·ª´ file c≈© */
    .ads-modal-bg {
      position: fixed;
      inset: 0;
      background: rgba(30,40,53,0.56);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.25s;
    }
    .ads-modal {
      background: #fff;
      border-radius: 22px;
      box-shadow: 0 8px 40px rgba(40,50,70,0.18);
      max-width: 97vw;
      max-height: 97vh;
      position: relative;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: popupShow 0.3s;
      overflow: hidden;
    }
    .ads-modal img {
      display: block;
      max-width: 92vw;
      max-height: 89vh;
      border-radius: 22px;
      background: #fff;
    }
    .ads-modal-close {
      position: absolute;
      top: 12px;
      right: 17px;
      background: #fff;
      border: none;
      border-radius: 50%;
      width: 39px;
      height: 39px;
      font-size: 2.1rem;
      color: #e53935;
      cursor: pointer;
      box-shadow: 0 2px 9px rgba(230,57,53,0.14);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
      transition: background 0.13s;
    }
    .ads-modal-close:hover {
      background: #ffecec;
    }
    @keyframes popupShow {
      0% { opacity: 0; transform: scale(0.93);}
      100% { opacity: 1; transform: scale(1);}
    }
    @media (max-width:700px) {
      .ads-modal {max-width:99vw;max-height:99vh;border-radius:11px;}
      .ads-modal img {max-width:99vw;max-height:75vh;border-radius:11px;}
      .ads-modal-close {width:32px;height:32px;font-size:1.4rem;}
    }
    /* C√°c style c√≤n l·∫°i gi·ªØ nguy√™n (container, promo, tab, doc-list...) */
    .container {
      max-width: 1100px;
      margin: 32px auto 0;
      background: #fff;
      padding: 32px 34px 30px 34px;
      border-radius: 16px;
      box-shadow: 0 2px 16px rgba(0,0,0,0.08);
    }
    /* ... c√°c style kh√°c gi·ªØ nguy√™n ... */
  </style>
</head>
<script>
  // Popup qu·∫£ng c√°o t·ª´ file c≈©
  window.addEventListener("DOMContentLoaded", function() {
    const bg = document.getElementById('adsModalBg');
    const closeBtn = document.getElementById('adsModalClose');
    function closeAds() {
      bg.style.display = "none";
    }
    closeBtn.onclick = closeAds;
    bg.onclick = function(e) {
      if (e.target === bg) closeAds();
    }
    setTimeout(closeAds, 12000);
  });
</script>
<body>
  <!-- POPUP ADS -->
  <div class="ads-modal-bg" id="adsModalBg">
    <div class="ads-modal">
      <button class="ads-modal-close" id="adsModalClose" aria-label="ƒê√≥ng qu·∫£ng c√°o">&times;</button>
      <img src="ads.png" alt="Qu·∫£ng c√°o n·ªïi b·∫≠t" onerror="this.style.display='none'">
    </div>
  </div>
  <!-- HEADER -->
  <header>
    <div class="header-left-group">
      <img src="logo.png" alt="Logo" class="main-logo" onerror="this.style.display='none'">
      <div class="header-title">v1.0</div>
    </div>
    <div class="header-countdown-wrap">
      <div class="countdown-label-box">
        <div>THPT<br>QG</div>
      </div>
      <div class="countdown-main-box">
        <div class="countdown-block">
          <span id="countdown-day">00</span>
          <span class="countdown-unit">Ng√†y</span>
        </div>
        <div class="countdown-block">
          <span id="countdown-hour">00</span>
          <span class="countdown-unit">Gi·ªù</span>
        </div>
        <div class="countdown-block">
          <span id="countdown-minute">00</span>
          <span class="countdown-unit">Ph√∫t</span>
        </div>
        <div class="countdown-block">
          <span id="countdown-second">00</span>
          <span class="countdown-unit">Gi√¢y</span>
        </div>
      </div>
    </div>
  </header>
  <div class="container">
    <!-- ... c√°c ph·∫ßn promo, tab, doc-list gi·ªØ nguy√™n ... -->
    <div class="promo">
      <strong>üéì KH√ìA H·ªåC XPS ‚Äì L·ªöP 10, 11, 12 ‚Äì C·∫§P T·ªêC, GI√Å R·∫∫</strong><br>
      <span style="color:#1976d2;font-weight:600;">∆Øu ƒë√£i th√°ng n√†y ‚Äì H·ªçc tr·ªçn g√≥i t·ª´ A‚ÄìZ, ch·ªçn th·∫ßy c√¥ theo gu c·ªßa b·∫°n!</span><br>
      <span class="promo-combo"><u>Combo L·ªõp 12 ‚Äì d√†nh cho 2K7:</u></span>
      <ul class="promo-list">
        <li>‚úÖ Gi√°: <span class="ibzalo" onclick="window.open('https://zalo.me/0788559492','_blank')">click v√†o ƒë√¢y ƒë·ªÉ ƒë∆∞·ª£c b√°o gi√° </span> nh√©</li>
        <li>üìå T·∫∂NG k√®m: Kh√≥a h·ªçc l·ªõp 10 + 11 b·∫£n 2025</li>
      </ul>
      <span class="promo-combo"><u>Combo L·ªõp 12 ‚Äì d√†nh cho 2K8:</u></span>
      <ul class="promo-list">
        <li>‚úÖ Gi√°: <span class="ibzalo" onclick="window.open('https://zalo.me/0788559492','_blank')">click v√†o ƒë√¢y ƒë·ªÉ ƒë∆∞·ª£c b√°o gi√°</span> nh√©</li>
        <li>üìå T·∫∂NG k√®m: Kh√≥a h·ªçc l·ªõp 10 + 11 b·∫£n 2025</li>
      </ul>
      <span class="promo-combo"><u>Combo L·ªõp 11/10 ‚Äì d√†nh cho 2K9/2K10:</u></span>
      <ul class="promo-list">
        <li>‚úÖ Gi√°: <span class="ibzalo" onclick="window.open('https://zalo.me/0788559492','_blank')">click v√†o ƒë√¢y ƒë·ªÉ ƒë∆∞·ª£c b√°o gi√°</span> nh√©</li>
        <li>üìå C√≥ c·∫£ t·ªï h·ª£p: To√°n, VƒÉn, Anh, KHTN, KHXH</li>
        <li>üìå T·∫∂NG: Kh√≥a h·ªçc l·ªõp 10 b·∫£n 2025</li>
      </ul>
      <span class="promo-highlight">üÜì ƒê∆Ø·ª¢C H·ªåC TH·ª¨ 24 GI·ªú MI·ªÑN PH√ç tr∆∞·ªõc khi ƒëƒÉng k√Ω</span><br>
      ‚ôªÔ∏è C·∫≠p nh·∫≠t b√†i gi·∫£ng m·ªõi m·ªói tu·∫ßn, c√≥ file luy·ªán ƒë·ªÅ, h·ªá th·ªëng √¥n t·∫≠p cu·ªëi k·ª≥<br>
      <b style="color:#1976d2;">üéØ ƒê·∫∑c bi·ªát:</b><br>
      <ul class="promo-list">
        <li>Kh√≥a TOEIC c√¥ Mai Ph∆∞∆°ng: <span class="ibzalo" onclick="window.open('https://zalo.me/0788559492','_blank')">click v√†o ƒë√¢y ƒë·ªÉ ƒë∆∞·ª£c b√°o gi√°</span> nh√©</li>
        <li>Kh√≥a IELTS n·ªÅn t·∫£ng ‚Äì n√¢ng band: <span class="ibzalo" onclick="window.open('https://zalo.me/0788559492','_blank')">click v√†o ƒë√¢y ƒë·ªÉ ƒë∆∞·ª£c b√°o gi√°</span> nh√©</li>
        <li>Kh√≥a sinh vi√™n √¥n l·∫°i g·ªëc l·ªõp 12: <span class="ibzalo" onclick="window.open('https://zalo.me/0788559492','_blank')">click v√†o ƒë√¢y ƒë·ªÉ ƒë∆∞·ª£c b√°o gi√°</span> nh√©</li>
      </ul>
      <span style="color:#d84315;font-weight:600;">‚è≥ ∆Øu ƒë√£i gi·ªõi h·∫°n trong th√°ng ‚Äì nhanh tay ƒëƒÉng k√Ω ƒë·ªÉ kh√¥ng b·ªè l·ª°!</span>
    </div>
    <div class="tabs" id="classTabs"></div>
    <div class="subjects" id="subjectTabs"></div>
    <div class="doc-list" id="documentList"></div>
  </div>
  <!-- Zalo N·ªïi -->
  <div class="zalo-fab" id="zaloFab" title="Nh·∫Øn Zalo ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n ngay!">
    <span>Li√™n h·ªá</span>
  </div>
  <div class="zalo-chat-balloon" id="zaloBalloon">
    üí¨ <span>Li√™n h·ªá Zalo</span> ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n ngay!
  </div>
  <footer>
    <div class="footer-inner">
      <span class="footer-strong">Li√™n h·ªá:</span>
      <a href="https://zalo.me/0788559492" class="footer-link" target="_blank" rel="noopener">Zalo 0788559492</a>
      &bull;
      <a href="https://www.tiktok.com/@khoahocgiasiure" class="footer-link" target="_blank" rel="noopener">TikTok @khoahocgiasiure</a>
      &bull;
      <a href="https://www.threads.net/@khoahocgiasiure" class="footer-link" target="_blank" rel="noopener">Threads @khoahocgiasiure</a>
      <br>
      <span style="color:#888;font-weight:400;display:block;margin-top:7px;">
        &copy; 2025 <b style="color:#1976d2;font-weight:800">by @phusiucute</b> &mdash; Share t√†i li·ªáu kho√° h·ªçc 10, 11, 12 gi√° r·∫ª, nhanh, uy t√≠n.
      </span>
    </div>
  </footer>
  <script>
    // ƒê·∫øm ng∆∞·ª£c k·ª≥ thi
    const examDate = new Date("2025-06-26T07:45:00+07:00");
    function updateExamCountdown() {
      const now = new Date();
      const diff = examDate - now;
      let days = 0, hours = 0, minutes = 0, seconds = 0;
      if (diff > 0) {
        days = Math.floor(diff / (1000 * 60 * 60 * 24));
        hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        minutes = Math.floor((diff / (1000 * 60)) % 60);
        seconds = Math.floor((diff / 1000) % 60);
      }
      document.getElementById("countdown-day").textContent = days.toString().padStart(2, "0");
      document.getElementById("countdown-hour").textContent = hours.toString().padStart(2, "0");
      document.getElementById("countdown-minute").textContent = minutes.toString().padStart(2, "0");
      document.getElementById("countdown-second").textContent = seconds.toString().padStart(2, "0");
    }
    setInterval(updateExamCountdown, 1000);
    updateExamCountdown();

    // Zalo FAB chat
    const zaloFab = document.getElementById('zaloFab');
    const zaloBalloon = document.getElementById('zaloBalloon');
    let zaloBalloonTimer = null;
    zaloFab.onclick = function() {
      window.open('https://zalo.me/0788559492', '_blank');
    };
    zaloFab.addEventListener('mouseenter', ()=>{
      zaloBalloon.style.display = 'block';
      clearTimeout(zaloBalloonTimer);
      zaloBalloonTimer = setTimeout(()=>{zaloBalloon.style.display='none'}, 4200);
    });
    zaloFab.addEventListener('mouseleave', ()=> {
      zaloBalloon.style.display = 'none';
      clearTimeout(zaloBalloonTimer);
    });
    setTimeout(()=>{zaloBalloon.style.display='block'; zaloBalloonTimer = setTimeout(()=>{zaloBalloon.style.display='none'}, 4000);},1500);

    // === GOOGLE SHEET CODE GI·ªÆ NGUY√äN ===
    const SHEET_API = "https://opensheet.elk.sh/1hXvKb09Bu5xzqFAlgRjZ1S3Z0uQ8wjfDVQQn4uAuYH0/Sheet1";
    const subjectList = ["to√°n","l√Ω","h√≥a","sinh","s·ª≠","ƒë·ªãa","vƒÉn","ti·∫øng anh"];
    let allDocs = [];
    let classList = [];
    let currentClass = "";
    let currentSubject = subjectList[0];

    function renderClassTabs() {
      const classTabs = document.getElementById("classTabs");
      classTabs.innerHTML = "";
      classList.forEach(cls => {
        const tab = document.createElement("div");
        tab.className = "tab" + (cls===currentClass ? " active" : "");
        tab.innerText = "L·ªõp " + cls;
        tab.onclick = () => {
          currentClass = cls;
          let found = subjectList.find(subj => allDocs.some(doc => doc.class === cls && doc.subject === subj));
          currentSubject = found || subjectList[0];
          renderClassTabs(); renderSubjectTabs(); renderDocs();
        };
        classTabs.appendChild(tab);
      });
    }
    function renderSubjectTabs() {
      const subjectTabs = document.getElementById("subjectTabs");
      subjectTabs.innerHTML = "";
      subjectList.forEach(sub => {
        if (allDocs.some(doc => doc.class === currentClass && doc.subject === sub)) {
          const tab = document.createElement("div");
          tab.className = "subject" + (sub===currentSubject ? " active" : "");
          tab.innerText = sub.charAt(0).toUpperCase() + sub.slice(1);
          tab.onclick = () => { currentSubject = sub; renderSubjectTabs(); renderDocs(); };
          subjectTabs.appendChild(tab);
        }
      });
    }
    function renderDocs() {
      const docList = document.getElementById("documentList");
      docList.innerHTML = "";
      const docs = allDocs.filter(doc => doc.class === currentClass && doc.subject === currentSubject);
      if (!docs || docs.length === 0) {
        docList.innerHTML = "<div style='grid-column:1/-1;text-align:center;color:#999;font-size:1.1rem'>Ch∆∞a c√≥ t√†i li·ªáu cho m·ª•c n√†y.</div>";
        return;
      }
      docs.forEach((doc, idx) => {
        const div = document.createElement("div");
        div.className = "doc-box";
        const key = "clicked_" + (doc.title||"") + "_" + (doc.class||"") + "_" + (doc.subject||"");
        div.onclick = () => {
          const isFirst = !localStorage.getItem(key);
          if(isFirst && doc.shopee_link){
            localStorage.setItem(key, "true");
            window.open(doc.shopee_link, "_blank");
          } else if(doc.drive_link) {
            window.open(doc.drive_link, "_blank");
          }
        };
        div.innerHTML = `<span class="doc-icon">üìÑ</span>
          <span class="doc-title">${doc.title||"(Kh√¥ng c√≥ t√™n t√†i li·ªáu)"}</span>
          <div class="doc-date">C·∫≠p nh·∫≠t: ${doc.updatedAt||""}</div>
        `;
        docList.appendChild(div);
      });
    }

    fetch(SHEET_API)
      .then(res => res.json())
      .then(rows => {
        allDocs = rows.map(doc => ({
          ...doc,
          class: (doc.class||"").trim(),
          subject: (doc.subject||"").trim().toLowerCase(),
          title: (doc.title||"").trim(),
          drive_link: (doc.drive_link||"").trim(),
          shopee_link: (doc.shopee_link||"").trim(),
          updatedAt: (doc.updatedAt||"").trim()
        })).filter(doc => doc.class && doc.subject && doc.title);
        classList = [...new Set(allDocs.map(doc=>doc.class))].sort((a,b) => b-a);
        currentClass = classList[0] || "";
        let found = subjectList.find(subj => allDocs.some(doc => doc.class === currentClass && doc.subject === subj));
        currentSubject = found || subjectList[0];
        renderClassTabs();
        renderSubjectTabs();
        renderDocs();
      })
      .catch(e => {
        document.getElementById("documentList").innerHTML = "<div style='color:red'>Kh√¥ng t·∫£i ƒë∆∞·ª£c d·ªØ li·ªáu t·ª´ Google Sheet. H√£y ki·ªÉm tra l·∫°i ID Sheet v√† quy·ªÅn chia s·∫ª!</div>";
      });
  </script>
</body>
</html>
